{"version":3,"sources":["all.js"],"names":["api_path","token","productData","cartData","cartProductId","init","document","querySelector","getProductList","getCartList","axios","get","then","response","data","products","renderProductList","selectList","addEventListener","renderSelectList","addCartBtn","querySelectorAll","forEach","item","addToCartData","error","console","log","inputData","productList","str","content","id","category","images","title","addCommaReg","price","innerHTML","num","number","toString","split","replace","join","e","target","value","filterData","filter","addCartItem","productId","post","cart","carts","renderCartList","preventDefault","closest","dataset","cartList","product","chart","c3","generate","bindto","type","columns","colors"],"mappings":";;AAAA;AACA,IAAMA,QAAQ,GAAG,UAAjB;AACA,IAAMC,KAAK,GAAG,8BAAd;AAEA,IAAIC,WAAW,GAAE,EAAjB;AACA,IAAIC,QAAQ,GAAE,EAAd;AACA,IAAIC,aAAa,GAAG,EAApB;;AAEA,SAASC,IAAT,GAAe;AACb,MAAGC,QAAQ,CAACC,aAAT,CAAuB,qBAAvB,CAAH,EAAiD;AAC/CC,IAAAA,cAAc;AACdC,IAAAA,WAAW;AACZ,GAHD,MAGK,CAEJ;AACF;;AAEDJ,IAAI,G,CAEJ;AAEA;;AACA,SAASG,cAAT,GAA0B;AACxBE,EAAAA,KAAK,CAACC,GAAN,kEACsEX,QADtE,gBAGGY,IAHH,CAGQ,UAAUC,QAAV,EAAoB;AACxBX,IAAAA,WAAW,GAAGW,QAAQ,CAACC,IAAT,CAAcC,QAA5B;AACAC,IAAAA,iBAAiB,CAACd,WAAD,CAAjB;AAEA,QAAMe,UAAU,GAAGX,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAnB;AACAU,IAAAA,UAAU,CAACC,gBAAX,CAA4B,QAA5B,EAAsCC,gBAAtC;AAEA,QAAMC,UAAU,GAAGd,QAAQ,CAACe,gBAAT,CAA0B,eAA1B,CAAnB;AACAD,IAAAA,UAAU,CAACE,OAAX,CAAmB,UAAAC,IAAI;AAAA,aAAIA,IAAI,CAACL,gBAAL,CAAsB,OAAtB,EAA+BM,aAA/B,CAAJ;AAAA,KAAvB;AACD,GAZH,WAaS,UAASC,KAAT,EAAe;AACpBC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,KAArB;AACD,GAfH;AAgBD,C,CAED;;;AACA,SAAST,iBAAT,CAA2BY,SAA3B,EAAqC;AACnC,MAAMC,WAAW,GAAGvB,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAApB;AACA,MAAIuB,GAAG,GAAE,EAAT;AACAF,EAAAA,SAAS,CAACN,OAAV,CAAkB,UAAAC,IAAI,EAAE;AACtB,QAAMQ,OAAO,kGACiER,IAAI,CAACS,EADtE,gCAC4FT,IAAI,CAACU,QADjG,iGAICV,IAAI,CAACW,MAJN,0IAMLX,IAAI,CAACY,KANA,8FASqBC,WAAW,CAACb,IAAI,CAAC,cAAD,CAAL,CAThC,sDAUgBa,WAAW,CAACb,IAAI,CAACc,KAAN,CAV3B,wCAAb;AAcAP,IAAAA,GAAG,IAAIC,OAAP;AACD,GAhBD;AAiBAF,EAAAA,WAAW,CAACS,SAAZ,GAAwBR,GAAxB;AACD,C,CAED;;;AACA,SAASM,WAAT,CAAqBG,GAArB,EAAyB;AACvB,MAAIC,MAAM,GAAGD,GAAG,CAACE,QAAJ,GAAeC,KAAf,CAAqB,GAArB,CAAb;AACAF,EAAAA,MAAM,CAAC,CAAD,CAAN,GAAYA,MAAM,CAAC,CAAD,CAAN,CAAUG,OAAV,CAAkB,uBAAlB,EAA2C,GAA3C,CAAZ;AAEA,SAAOH,MAAM,CAACI,IAAP,CAAY,GAAZ,CAAP;AACD,C,CAED;;;AACA,SAASzB,gBAAT,CAA0B0B,CAA1B,EAA4B;AAC1BnB,EAAAA,OAAO,CAACC,GAAR,CAAYkB,CAAC,CAACC,MAAF,CAASC,KAArB;AACA,MAAIC,UAAU,GAAG,EAAjB,CAF0B,CAI1B;;AACA,MAAGH,CAAC,CAACC,MAAF,CAASC,KAAT,KAAmB,IAAtB,EAA2B;AACzBC,IAAAA,UAAU,GAAG9C,WAAb;AACD,GAFD,MAEK;AACH8C,IAAAA,UAAU,GAAG9C,WAAW,CAAC+C,MAAZ,CAAoB,UAAA1B,IAAI;AAAA,aAAIA,IAAI,CAACU,QAAL,KAAkBY,CAAC,CAACC,MAAF,CAASC,KAA/B;AAAA,KAAxB,CAAb;AACD;;AACD/B,EAAAA,iBAAiB,CAACgC,UAAD,CAAjB;AAED,C,CAGD;;;AACA,SAASE,WAAT,CAAqBC,SAArB,EAAgC;AAC9BzC,EAAAA,KAAK,CAAC0C,IAAN,kEAAqEpD,QAArE,aAAuF;AACrFc,IAAAA,IAAI,EAAE;AACJ,mBAAaqC,SADT;AAEJ,kBAAY;AAFR;AAD+E,GAAvF,EAMEvC,IANF,CAMO,UAAUC,QAAV,EAAoB;AACvBa,IAAAA,OAAO,CAACC,GAAR,CAAYd,QAAQ,CAACC,IAAT,CAAcuC,IAA1B;AACA5C,IAAAA,WAAW;AACZ,GATH;AAWD,C,CAED;;;AACA,SAASA,WAAT,GAAuB;AACrBC,EAAAA,KAAK,CAACC,GAAN,kEAAoEX,QAApE,aACEY,IADF,CACO,UAAUC,QAAV,EAAoB;AACvBV,IAAAA,QAAQ,GAAGU,QAAQ,CAACC,IAAT,CAAcwC,KAAzB;AACAC,IAAAA,cAAc,CAACpD,QAAD,CAAd;AACD,GAJH;AAKD,C,CAED;;;AACA,SAASqB,aAAT,CAAuBqB,CAAvB,EAAyB;AACvBA,EAAAA,CAAC,CAACW,cAAF;AACA,MAAIL,SAAS,GAAGN,CAAC,CAACC,MAAF,CAASW,OAAT,CAAiB,IAAjB,EAAuBC,OAAvB,CAA+B1B,EAA/C;AAEAkB,EAAAA,WAAW,CAACC,SAAD,CAAX;AAED,C,CAED;;;AACA,SAASI,cAAT,CAAwB3B,SAAxB,EAAkC;AAChC,MAAM+B,QAAQ,GAAGrD,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAAjB;AAEA,MAAIuB,GAAG,GAAG,EAAV;AACAF,EAAAA,SAAS,CAACN,OAAV,CAAkB,UAAAC,IAAI,EAAG;AACvB,QAAIQ,OAAO,kGAISR,IAAI,CAACqC,OAAL,CAAa1B,MAJtB,6CAKEX,IAAI,CAACqC,OAAL,CAAazB,KALf,yDAQFC,WAAW,CAACb,IAAI,CAACqC,OAAL,CAAavB,KAAd,CART,+CAUFD,WAAW,CAACb,IAAI,CAACqC,OAAL,CAAa,cAAb,CAAD,CAVT,mJAAX;AAmBA9B,IAAAA,GAAG,IAAIC,OAAP;AACD,GArBD;AAsBA4B,EAAAA,QAAQ,CAACrB,SAAT,GAAqBR,GAArB;AACD,C,CAED;;;AACA,IAAI+B,KAAK,GAAGC,EAAE,CAACC,QAAH,CAAY;AACtBC,EAAAA,MAAM,EAAE,QADc;AACJ;AAClBlD,EAAAA,IAAI,EAAE;AACFmD,IAAAA,IAAI,EAAE,KADJ;AAEFC,IAAAA,OAAO,EAAE,CACT,CAAC,aAAD,EAAgB,CAAhB,CADS,EAET,CAAC,aAAD,EAAgB,CAAhB,CAFS,EAGT,CAAC,WAAD,EAAc,CAAd,CAHS,EAIT,CAAC,IAAD,EAAO,CAAP,CAJS,CAFP;AAQFC,IAAAA,MAAM,EAAC;AACH,qBAAc,SADX;AAEH,qBAAc,SAFX;AAGH,mBAAa,SAHV;AAIH,YAAM;AAJH;AARL;AAFgB,CAAZ,CAAZ","file":"all.js","sourcesContent":["// 請代入自己的網址路徑\nconst api_path = \"joycheng\";\nconst token = \"PSNly2pd99XQct8dnO9toWyVyO13\";\n\nlet productData =[];\nlet cartData= [];\nlet cartProductId = '';\n\nfunction init(){\n  if(document.querySelector('[data-page=\"front\"]')){\n    getProductList();\n    getCartList();\n  }else{\n\n  }\n}\n\ninit();\n\n//font \n\n//取得產品列表\nfunction getProductList() {\n  axios.get(\n              `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`\n      )\n    .then(function (response) {\n      productData = response.data.products;\n      renderProductList(productData);\n\n      const selectList = document.querySelector('.js-select');\n      selectList.addEventListener('change', renderSelectList);\n\n      const addCartBtn = document.querySelectorAll('.js-addToCart');\n      addCartBtn.forEach(item => item.addEventListener('click', addToCartData));\n    })\n    .catch(function(error){\n      console.log('error', error)\n    })\n}\n\n//renderProductList\nfunction renderProductList(inputData){\n  const productList = document.querySelector('.js-product-list');\n  let str ='';\n  inputData.forEach(item=>{\n    const content = `\n    <li class=\"productCard d-flex flex-column justify-content-between\" data-id=\"${item.id}\" data-category=\"${item.category}\">\n    <div>\n      <h4 class=\"productType\">新品</h4>\n      <img src=\"${item.images}\" alt=\"product img\">\n      <a href=\"#\" class=\"addCardBtn js-addToCart\">加入購物車</a>\n      <h3>${item.title}</h3>\n    </div>\n      <div class=\"\">\n        <del class=\"originPrice\">NT$${addCommaReg(item['origin_price'])}</del>\n        <p class=\"nowPrice\">NT$${addCommaReg(item.price)}</p>\n      </div>\n    </li>\n    `;\n    str += content;\n  });\n  productList.innerHTML = str;\n} \n\n// 加上千分位\nfunction addCommaReg(num){\n  var number = num.toString().split('.');\n  number[0] = number[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  \n  return number.join('.')\n}\n\n//select change add render\nfunction renderSelectList(e){\n  console.log(e.target.value);\n  let filterData = [];\n\n  //productData\n  if(e.target.value === '全部'){\n    filterData = productData;\n  }else{\n    filterData = productData.filter((item => item.category === e.target.value))\n  }\n  renderProductList(filterData);\n\n}\n\n\n//加入購物車\nfunction addCartItem(productId) {\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`, {\n    data: {\n      \"productId\": productId,\n      \"quantity\": 1\n    }\n  }).\n    then(function (response) {\n      console.log(response.data.cart);\n      getCartList();\n    })\n\n}\n\n//取得購物車清單\nfunction getCartList() {\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`).\n    then(function (response) {\n      cartData = response.data.carts ;\n      renderCartList(cartData);\n    })\n}\n\n//點擊監聽事件\nfunction addToCartData(e){\n  e.preventDefault();\n  let productId = e.target.closest('li').dataset.id;\n\n  addCartItem(productId);\n\n}\n\n// render cartList\nfunction renderCartList(inputData){\n  const cartList = document.querySelector('.js-cartList');\n\n  let str = '';\n  inputData.forEach(item =>{\n    let content = `\n    <tr>\n    <td>\n        <div class=\"cardItem-title\">\n            <img src=\"${item.product.images}\" alt=\"img\">\n            <p>${item.product.title}</p>\n        </div>\n    </td>\n    <td>NT$${addCommaReg(item.product.price)}</td>\n    <td>1</td>\n    <td>NT$${addCommaReg(item.product['origin_price'])}</td>\n    <td class=\"discardBtn\">\n        <a href=\"#\" class=\"material-icons\">\n            clear\n        </a>\n    </td>\n  </tr>\n  `;\n\n    str += content;\n  })\n  cartList.innerHTML = str;\n}\n\n// C3.js\nlet chart = c3.generate({\n  bindto: '#chart', // HTML 元素綁定\n  data: {\n      type: \"pie\",\n      columns: [\n      ['Louvre 雙人床架', 1],\n      ['Antony 雙人床架', 2],\n      ['Anty 雙人床架', 3],\n      ['其他', 4],\n      ],\n      colors:{\n          \"Louvre 雙人床架\":\"#DACBFF\",\n          \"Antony 雙人床架\":\"#9D7FEA\",\n          \"Anty 雙人床架\": \"#5434A7\",\n          \"其他\": \"#301E5F\",\n      }\n  },\n});\n \n"]}