{"version":3,"sources":["all.js"],"names":["api_path","token","productData","cartData","cartProductId","cartId","orderData","orderList","cartNum","init","document","querySelector","getProductList","getCartList","validateForm","getOrderList","axios","get","then","response","data","products","renderProductList","selectList","addEventListener","renderSelectList","addCartBtn","querySelectorAll","forEach","item","addToCartData","cartList","deleteCartId","formList","getOrderData","error","console","log","inputData","productList","str","content","id","category","images","title","addCommaReg","price","innerHTML","num","number","toString","split","replace","join","e","target","value","filterData","filter","addCartItem","productId","post","carts","renderCartList","preventDefault","closest","classList","contains","dataset","clickNum","product","parseInt","length","quantity","endContent","clear","deleteCartItem","deleteAllCartList","inputGroup","select","alert","year","Date","getFullYear","month","getMonth","date","getDate","dateValue","i","getAttribute","placeholder","push","trim","userData","createOrder","message","headers","orders","renderOrderList","getChartData","deleteAll","deleteOrders","getOrderStatus","orderTable","sortOrderList","productItem","createdAt","user","name","tel","address","email","dateReg","paid","inputDate","toLocaleDateString","sort","a","b","del","deleteAllOrder","deleteOrderItem","orderId","editOrderList","orderStatus","put","statusBtn","editOrderStatus","status","productObj","aryObj","Object","keys","chartData","ary","generateChart","chart","c3","generate","bindto","type","columns","colors","constraints","presence","errors","validate","nextElementSibling","textContent"],"mappings":";;AAAA;AACA,IAAMA,QAAQ,GAAG,UAAjB;AACA,IAAMC,KAAK,GAAG,8BAAd;AAEA,IAAIC,WAAW,GAAE,EAAjB;AACA,IAAIC,QAAQ,GAAE,EAAd;AACA,IAAIC,aAAa,GAAG,EAApB;AACA,IAAIC,MAAM,GAAG,EAAb;AACA,IAAIC,SAAS,GAAE,EAAf;AACA,IAAIC,SAAS,GAAC,EAAd;AACA,IAAIC,OAAO,GAAG,CAAd;;AAEA,SAASC,IAAT,GAAe;AACb,MAAGC,QAAQ,CAACC,aAAT,CAAuB,qBAAvB,CAAH,EAAiD;AAC/CC,IAAAA,cAAc;AACdC,IAAAA,WAAW;AACXC,IAAAA,YAAY;AACb,GAJD,MAIK;AACHC,IAAAA,YAAY;AAEb;AACF;;AAEDN,IAAI,G,CAEJ;AAEA;;AACA,SAASG,cAAT,GAA0B;AACxBI,EAAAA,KAAK,CAACC,GAAN,kEACsEjB,QADtE,gBAGGkB,IAHH,CAGQ,UAAUC,QAAV,EAAoB;AACxBjB,IAAAA,WAAW,GAAGiB,QAAQ,CAACC,IAAT,CAAcC,QAA5B;AACAC,IAAAA,iBAAiB,CAACpB,WAAD,CAAjB;AACA,QAAMqB,UAAU,GAAGb,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAnB;AACAY,IAAAA,UAAU,CAACC,gBAAX,CAA4B,QAA5B,EAAsCC,gBAAtC;AAEA,QAAMC,UAAU,GAAGhB,QAAQ,CAACiB,gBAAT,CAA0B,eAA1B,CAAnB;AACAD,IAAAA,UAAU,CAACE,OAAX,CAAmB,UAAAC,IAAI;AAAA,aAAIA,IAAI,CAACL,gBAAL,CAAsB,OAAtB,EAA+BM,aAA/B,CAAJ;AAAA,KAAvB;AAEA,QAAMC,QAAQ,GAAGrB,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAAjB;AACAoB,IAAAA,QAAQ,CAACP,gBAAT,CAA0B,OAA1B,EAAmCQ,YAAnC;AAEA,QAAMC,QAAQ,GAAGvB,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAjB;AACAsB,IAAAA,QAAQ,CAACT,gBAAT,CAA0B,QAA1B,EAAmCU,YAAnC;AAED,GAlBH,WAmBS,UAASC,KAAT,EAAe;AACpBC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,KAArB;AACD,GArBH;AAsBD,C,CAED;;;AACA,SAASb,iBAAT,CAA2BgB,SAA3B,EAAqC;AACnC,MAAMC,WAAW,GAAG7B,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAApB;AACA,MAAI6B,GAAG,GAAE,EAAT;AACAF,EAAAA,SAAS,CAACV,OAAV,CAAkB,UAAAC,IAAI,EAAE;AACtB,QAAMY,OAAO,kGACiEZ,IAAI,CAACa,EADtE,gCAC4Fb,IAAI,CAACc,QADjG,iGAICd,IAAI,CAACe,MAJN,yJAMLf,IAAI,CAACgB,KANA,mFASqBC,WAAW,CAACjB,IAAI,CAAC,cAAD,CAAL,CAThC,sDAUgBiB,WAAW,CAACjB,IAAI,CAACkB,KAAN,CAV3B,wCAAb;AAcAP,IAAAA,GAAG,IAAIC,OAAP;AACD,GAhBD;AAiBAF,EAAAA,WAAW,CAACS,SAAZ,GAAwBR,GAAxB;AACD,C,CAED;;;AACA,SAASM,WAAT,CAAqBG,GAArB,EAAyB;AACvB,MAAIC,MAAM,GAAGD,GAAG,CAACE,QAAJ,GAAeC,KAAf,CAAqB,GAArB,CAAb;AACAF,EAAAA,MAAM,CAAC,CAAD,CAAN,GAAYA,MAAM,CAAC,CAAD,CAAN,CAAUG,OAAV,CAAkB,uBAAlB,EAA2C,GAA3C,CAAZ;AAEA,SAAOH,MAAM,CAACI,IAAP,CAAY,GAAZ,CAAP;AACD,C,CAED;;;AACA,SAAS7B,gBAAT,CAA0B8B,CAA1B,EAA4B;AAC1BnB,EAAAA,OAAO,CAACC,GAAR,CAAYkB,CAAC,CAACC,MAAF,CAASC,KAArB;AACA,MAAIC,UAAU,GAAG,EAAjB,CAF0B,CAI1B;;AACA,MAAGH,CAAC,CAACC,MAAF,CAASC,KAAT,KAAmB,IAAtB,EAA2B;AACzBC,IAAAA,UAAU,GAAGxD,WAAb;AACD,GAFD,MAEK;AACHwD,IAAAA,UAAU,GAAGxD,WAAW,CAACyD,MAAZ,CAAoB,UAAA9B,IAAI;AAAA,aAAIA,IAAI,CAACc,QAAL,KAAkBY,CAAC,CAACC,MAAF,CAASC,KAA/B;AAAA,KAAxB,CAAb;AACD;;AACDnC,EAAAA,iBAAiB,CAACoC,UAAD,CAAjB;AAED,C,CAED;;;AACA,SAASE,WAAT,CAAqBC,SAArB,EAAgCZ,GAAhC,EAAqC;AACnCjC,EAAAA,KAAK,CAAC8C,IAAN,kEAAqE9D,QAArE,aAAuF;AACrFoB,IAAAA,IAAI,EAAE;AACJ,mBAAayC,SADT;AAEJ,kBAAYZ;AAFR;AAD+E,GAAvF,EAME/B,IANF,CAMO,UAAUC,QAAV,EAAoB;AACvBN,IAAAA,WAAW;AACd,GARD;AASD,C,CAED;;;AACA,SAASA,WAAT,GAAuB;AACrBG,EAAAA,KAAK,CAACC,GAAN,kEAAoEjB,QAApE,aACEkB,IADF,CACO,UAAUC,QAAV,EAAoB;AACvBhB,IAAAA,QAAQ,GAAGgB,QAAQ,CAACC,IAAT,CAAc2C,KAAzB;AACAC,IAAAA,cAAc,CAAC7D,QAAD,CAAd;AACD,GAJH;AAKD,C,CAED;;;AACA,SAAS2B,aAAT,CAAuByB,CAAvB,EAAyB;AACvBA,EAAAA,CAAC,CAACU,cAAF;;AACA,MAAGV,CAAC,CAACC,MAAF,CAASU,OAAT,CAAiB,GAAjB,EAAsBC,SAAtB,CAAgCC,QAAhC,CAAyC,YAAzC,CAAH,EAA0D;AACxD,QAAIP,SAAS,GAAGN,CAAC,CAACC,MAAF,CAASU,OAAT,CAAiB,IAAjB,EAAuBG,OAAvB,CAA+B3B,EAA/C;AACA,QAAI4B,QAAQ,GAAGf,CAAC,CAACC,MAAF,CAASU,OAAT,CAAiB,GAAjB,EAAsBG,OAAtB,CAA8BpB,GAA7C;AAEA9C,IAAAA,QAAQ,CAACyB,OAAT,CAAiB,UAAAC,IAAI,EAAG;AACtB,UAAGA,IAAI,CAAC0C,OAAL,CAAa7B,EAAb,KAAoBmB,SAAvB,EAAkC;AAChCrD,QAAAA,OAAO,IAAIgE,QAAQ,CAACF,QAAD,CAAnB;AACD;AACF,KAJD;AAMAV,IAAAA,WAAW,CAACC,SAAD,EAAYrD,OAAZ,CAAX;AACD;AAGF,C,CAED;;;AACA,SAASwD,cAAT,CAAwB1B,SAAxB,EAAkC;AAChC,MAAMP,QAAQ,GAAGrB,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAAjB;AACA,MAAIsC,GAAG,GAAG,CAAV;AACA,MAAIT,GAAG,uNAAP;;AASA,MAAGF,SAAS,CAACmC,MAAV,KAAoB,CAAvB,EAA0B;AACxB,QAAIhC,OAAO,gKAAX;AAOAD,IAAAA,GAAG,IAAIC,OAAP;AAED,GAVD,MAUK;AACHH,IAAAA,SAAS,CAACV,OAAV,CAAkB,UAAAC,IAAI,EAAG;AACvB,UAAIY,OAAO,wCACSZ,IAAI,CAACa,EADd,iGAISb,IAAI,CAAC0C,OAAL,CAAa3B,MAJtB,+CAKEf,IAAI,CAAC0C,OAAL,CAAa1B,KALf,+DAQFC,WAAW,CAACjB,IAAI,CAAC0C,OAAL,CAAaxB,KAAd,CART,8BASLlB,IAAI,CAAC6C,QATA,iCAUF5B,WAAW,CAACjB,IAAI,CAAC0C,OAAL,CAAaxB,KAAb,GAAmBlB,IAAI,CAAC6C,QAAzB,CAVT,uLAAX;AAkBAzB,MAAAA,GAAG,IAAIpB,IAAI,CAAC0C,OAAL,CAAaxB,KAApB;AACAP,MAAAA,GAAG,IAAIC,OAAP;AACD,KArBD;AAsBA,QAAIkC,UAAU,sPASL7B,WAAW,CAACG,GAAD,CATN,mBAAd;AAWAT,IAAAA,GAAG,IAAImC,UAAP;AACD;;AACD5C,EAAAA,QAAQ,CAACiB,SAAT,GAAoBR,GAApB;AAED,C,CAED;;;AACA,SAASR,YAAT,CAAsBuB,CAAtB,EAAwB;AACtB,MAAG7C,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAAH,EAA0C;AACxCyB,IAAAA,OAAO,CAACC,GAAR,CAAYkB,CAAC,CAACC,MAAF,CAASa,OAAT,CAAiBO,KAA7B,EADwC,CAGxC;;AACA,QAAGrB,CAAC,CAACC,MAAF,CAASa,OAAT,CAAiBO,KAAjB,KAA2B,QAA9B,EAAuC;AACrCrB,MAAAA,CAAC,CAACU,cAAF;AACA5D,MAAAA,MAAM,GAAGkD,CAAC,CAACC,MAAF,CAASU,OAAT,CAAiB,IAAjB,EAAuBG,OAAvB,CAA+BhE,MAAxC;AAEDwE,MAAAA,cAAc,CAACxE,MAAD,CAAd;AACA,KALD,MAKM,IAAGkD,CAAC,CAACC,MAAF,CAASa,OAAT,CAAiBO,KAAjB,KAA2B,KAA9B,EAAoC;AACxCrB,MAAAA,CAAC,CAACU,cAAF;AACAa,MAAAA,iBAAiB;AAClB;;AAAA;AAEF;AACF,C,CAED;;;AACA,SAASD,cAAT,CAAwBxE,MAAxB,EAAgC;AAC9BW,EAAAA,KAAK,UAAL,kEAAuEhB,QAAvE,oBAAyFK,MAAzF,GACEa,IADF,CACO,UAAUC,QAAV,EAAoB;AACvBhB,IAAAA,QAAQ,GAAGgB,QAAQ,CAACC,IAAT,CAAc2C,KAAzB;AACAlD,IAAAA,WAAW;AACZ,GAJH;AAKD,C,CAED;;;AACA,SAASiE,iBAAT,GAA6B;AAC3B9D,EAAAA,KAAK,UAAL,kEAAuEhB,QAAvE,aACEkB,IADF,CACO,UAAUC,QAAV,EAAoB;AACvBhB,IAAAA,QAAQ,GAAGgB,QAAQ,CAACC,IAAT,CAAc2C,KAAzB;AACAlD,IAAAA,WAAW;AACZ,GAJH;AAKD,C,CAED;;;AACA,SAASqB,YAAT,CAAsBqB,CAAtB,EAAwB;AACtB,MAAGA,CAAC,CAACC,MAAF,CAASW,SAAT,CAAmBC,QAAnB,CAA4B,SAA5B,CAAH,EAA0C;AACxCb,IAAAA,CAAC,CAACU,cAAF;AACA,QAAMc,UAAU,GAAGrE,QAAQ,CAACiB,gBAAT,CAA0B,OAA1B,CAAnB;AACA,QAAMqD,MAAM,GAAGtE,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAf;;AACA,QAAGR,QAAQ,CAACsE,MAAT,KAAoB,CAAvB,EAAyB;AACvBQ,MAAAA,KAAK,CAAC,kBAAD,CAAL;AACA;AACD;;AAEH,QAAMC,IAAI,GAAG,IAAIC,IAAJ,GAAWC,WAAX,EAAb;AACA,QAAMC,KAAK,GAAG,CAAC,IAAIF,IAAJ,GAAWG,QAAX,KAAwB,CAAxB,GAA4B,EAA5B,GAAiC,GAAjC,GAAuC,EAAxC,KAA+C,IAAIH,IAAJ,GAAWG,QAAX,KAAwB,CAAvE,CAAd,CAV0C,CAUiD;;AAC3F,QAAMC,IAAI,GAAG,CAAC,IAAIJ,IAAJ,GAAWK,OAAX,KAAuB,EAAvB,GAA4B,GAA5B,GAAkC,EAAnC,IAAyC,IAAIL,IAAJ,GAAWK,OAAX,EAAtD;AACA,QAAIC,SAAS,aAAMP,IAAN,cAAcG,KAAd,cAAuBE,IAAvB,CAAb;;AAGE,SAAI,IAAIG,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGX,UAAU,CAACN,MAA9B,EAAuCiB,CAAC,EAAxC,EAA2C;AACzC,UAAGX,UAAU,CAACW,CAAD,CAAV,CAAcC,YAAd,CAA2B,MAA3B,MAAqC,QAAxC,EAAiD;AAC/C,YAAGZ,UAAU,CAACW,CAAD,CAAV,CAAcjC,KAAd,CAAoBgB,MAApB,KAA+B,CAAlC,EAAoC;AAClCQ,UAAAA,KAAK,WAAKF,UAAU,CAACW,CAAD,CAAV,CAAcE,WAAnB,OAAL;AACA;AACD,SAHD,MAGK;AACH,cAAIF,CAAC,GAAC,CAAF,IAAOX,UAAU,CAACN,MAAtB,EAA6B;AAC3BnE,YAAAA,SAAS,CAACuF,IAAV,CAAed,UAAU,CAACW,CAAD,CAAV,CAAcjC,KAAd,CAAoBqC,IAApB,EAAf;AACD,WAFD,MAEK;AACHxF,YAAAA,SAAS,CAACuF,IAAV,CAAed,UAAU,CAACW,CAAD,CAAV,CAAcjC,KAAd,CAAoBqC,IAApB,EAAf;AACAxF,YAAAA,SAAS,CAACuF,IAAV,CAAeb,MAAM,CAACvB,KAAtB;AACAnD,YAAAA,SAAS,CAACuF,IAAV,CAAeJ,SAAf;AAEA,gBAAIM,QAAQ,GAAG;AACb,sBAAQzF,SAAS,CAAC,CAAD,CADJ;AAEb,qBAAOA,SAAS,CAAC,CAAD,CAFH;AAGb,uBAASA,SAAS,CAAC,CAAD,CAHL;AAIb,yBAAWA,SAAS,CAAC,CAAD,CAJP;AAKb,yBAAWA,SAAS,CAAC,CAAD;AALP,aAAf;AAOA8B,YAAAA,OAAO,CAACC,GAAR,CAAY0D,QAAZ;AACAC,YAAAA,WAAW,CAACD,QAAD,CAAX;AACD;AACF;AACF;AACF;AAEF;AACF;;AAED,SAASC,WAAT,CAAqBD,QAArB,EAA+B;AAC7B/E,EAAAA,KAAK,CAAC8C,IAAN,kEAAqE9D,QAArE,cACE;AACE,YAAQ;AACN,cAAQ+F;AADF;AADV,GADF,EAOA7E,IAPA,CAOK,UAAUC,QAAV,EAAoB;AACrB8D,IAAAA,KAAK,CAAC,SAAD,CAAL;AACA,QAAMF,UAAU,GAAGrE,QAAQ,CAACiB,gBAAT,CAA0B,OAA1B,CAAnB;AACA,QAAMqD,MAAM,GAAGtE,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAf;AAEAoE,IAAAA,UAAU,CAACnD,OAAX,CAAmB,UAAAC,IAAI,EAAE;AACvB,UAAGA,IAAI,CAAC8D,YAAL,CAAkB,MAAlB,MAA4B,QAA/B,EAAwC;AACtC9D,QAAAA,IAAI,CAAC4B,KAAL,GAAY,EAAZ;AACD;AACF,KAJD;AAKAuB,IAAAA,MAAM,CAACvB,KAAP,GAAe,KAAf;AACA5C,IAAAA,WAAW;AAEZ,GApBH,WAqBS,UAASsB,KAAT,EAAe;AACpBC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBF,KAAK,CAAChB,QAAN,CAAeC,IAAf,CAAoB6E,OAAxC;AACD,GAvBH;AAwBD,C,CAED;;;AACA,SAASlF,YAAT,GAAwB;AACtBC,EAAAA,KAAK,CAACC,GAAN,+DAAiEjB,QAAjE,cACE;AACEkG,IAAAA,OAAO,EAAE;AACP,uBAAiBjG;AADV;AADX,GADF,EAMGiB,IANH,CAMQ,UAAUC,QAAV,EAAoB;AACxBZ,IAAAA,SAAS,GAAGY,QAAQ,CAACC,IAAT,CAAc+E,MAA1B;AACAC,IAAAA,eAAe,CAAC7F,SAAD,CAAf;AACA8F,IAAAA,YAAY,CAAC9F,SAAD,CAAZ;AAEA,QAAM+F,SAAS,GAAG5F,QAAQ,CAACiB,gBAAT,CAA0B,YAA1B,CAAlB;AACA2E,IAAAA,SAAS,CAAC1E,OAAV,CAAkB,UAAAC,IAAI;AAAA,aAAIA,IAAI,CAACL,gBAAL,CAAsB,OAAtB,EAA+B+E,YAA/B,CAAJ;AAAA,KAAtB;AAEAC,IAAAA,cAAc;AACf,GAfH;AAgBD;;AAED,SAASJ,eAAT,CAAyB9D,SAAzB,EAAmC;AACjC,MAAMmE,UAAU,GAAG/F,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAAnB;AACA,MAAI6B,GAAG,GAAG,EAAV;AACAA,EAAAA,GAAG,+VAAH;;AAYA,MAAGF,SAAS,CAACmC,MAAV,KAAqB,CAAxB,EAA0B;AACxB,QAAIhC,OAAO,+GAAX;AAKAD,IAAAA,GAAG,IAAIC,OAAP;AACD,GAPD,MAOK;AACHlC,IAAAA,SAAS,GAAGmG,aAAa,CAACpE,SAAD,CAAzB;AACA/B,IAAAA,SAAS,CAACqB,OAAV,CAAkB,UAAAC,IAAI,EAAG;AACvBA,MAAAA,IAAI,CAACR,QAAL,CAAcO,OAAd,CAAsB,UAAA+E,WAAW,EAAG;AAClC,YAAIlE,OAAO,sCACKZ,IAAI,CAACa,EADV,gCAEHb,IAAI,CAAC+E,SAFF,qDAIA/E,IAAI,CAACgF,IAAL,CAAUC,IAJV,oCAKAjF,IAAI,CAACgF,IAAL,CAAUE,GALV,kDAOHlF,IAAI,CAACgF,IAAL,CAAUG,OAPP,kCAQHnF,IAAI,CAACgF,IAAL,CAAUI,KARP,mDAUFN,WAAW,CAAC9D,KAVV,kDAYHqE,OAAO,CAACrF,IAAI,CAAC+E,SAAN,CAZJ,wHAcwC/E,IAAI,CAACsF,IAAL,GAAY,MAAZ,GAAmB,OAd3D,gBAcuEtF,IAAI,CAACsF,IAAL,GAAY,KAAZ,GAAkB,KAdzF,mMAAX;AAqBA3E,QAAAA,GAAG,IAAIC,OAAP;AACD,OAvBD;AAwBD,KAzBD;AA2BD;;AAEDgE,EAAAA,UAAU,CAACzD,SAAX,GAAuBR,GAAvB;AACD,C,CAED;;;AACA,SAAS0E,OAAT,CAAiBE,SAAjB,EAA2B;AACzB,MAAI7B,IAAI,GAAG,IAAIJ,IAAJ,CAASiC,SAAS,GAAC,IAAnB,CAAX;AACA,SAAO7B,IAAI,CAAC8B,kBAAL,EAAP;AACD;;AAGD,SAASX,aAAT,CAAuBpE,SAAvB,EAAiC;AAC/BA,EAAAA,SAAS,CAACgF,IAAV,CAAe,UAACC,CAAD,EAAGC,CAAH,EAAO;AACpB,WAAOD,CAAC,CAACX,SAAF,GAAcY,CAAC,CAACZ,SAAvB;AACD,GAFD;AAGA,SAAOtE,SAAP;AACD;;AAED,SAASiE,YAAT,CAAsBhD,CAAtB,EAAwB;AACtB,MAAGA,CAAC,CAACC,MAAF,CAASa,OAAT,CAAiBoD,GAApB,EAAwB;AACtBlE,IAAAA,CAAC,CAACU,cAAF;;AACA,QAAGV,CAAC,CAACC,MAAF,CAASa,OAAT,CAAiBoD,GAAjB,KAAuB,KAA1B,EAAgC;AAC9BC,MAAAA,cAAc;AACf,KAFD,MAEM,IAAGnE,CAAC,CAACC,MAAF,CAASa,OAAT,CAAiBoD,GAAjB,KAAyB,QAA5B,EAAqC;AACzC,UAAI/E,EAAE,GAAGa,CAAC,CAACC,MAAF,CAASU,OAAT,CAAiB,IAAjB,EAAuBG,OAAvB,CAA+B3B,EAAxC;AACAiF,MAAAA,eAAe,CAACjF,EAAD,CAAf;AACD;AACF;AACF,C,CAED;;;AACA,SAASgF,cAAT,GAA0B;AACxB1G,EAAAA,KAAK,UAAL,+DAAoEhB,QAApE,cACE;AACEkG,IAAAA,OAAO,EAAE;AACP,uBAAiBjG;AADV;AADX,GADF,EAMGiB,IANH,CAMQ,UAAUC,QAAV,EAAoB;AACxBJ,IAAAA,YAAY;AACb,GARH;AASD,C,CAGD;;;AACA,SAAS4G,eAAT,CAAyBC,OAAzB,EAAkC;AAChC5G,EAAAA,KAAK,UAAL,+DAAoEhB,QAApE,qBAAuF4H,OAAvF,GACE;AACE1B,IAAAA,OAAO,EAAE;AACP,uBAAiBjG;AADV;AADX,GADF,EAMGiB,IANH,CAMQ,UAAUC,QAAV,EAAoB;AACxBJ,IAAAA,YAAY;AACb,GARH;AASD,C,CAGD;;;AAEA,SAAS8G,aAAT,CAAuBD,OAAvB,EAAgCE,WAAhC,EAA6C;AAC3C9G,EAAAA,KAAK,CAAC+G,GAAN,+DAAiE/H,QAAjE,cACE;AACE,YAAQ;AACN,YAAM4H,OADA;AAEN,cAAQE;AAFF;AADV,GADF,EAOE;AACE5B,IAAAA,OAAO,EAAE;AACP,uBAAiBjG;AADV;AADX,GAPF,EAYGiB,IAZH,CAYQ,UAAUC,QAAV,EAAoB;AACxBiB,IAAAA,OAAO,CAACC,GAAR,CAAYlB,QAAZ;AACAJ,IAAAA,YAAY;AACb,GAfH;AAgBD;;AAGD,SAASyF,cAAT,GAAyB;AACvB,MAAG9F,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAH,EAAwC;AACtC,QAAMqH,SAAS,GAAGtH,QAAQ,CAACiB,gBAAT,CAA0B,YAA1B,CAAlB;AACAqG,IAAAA,SAAS,CAACpG,OAAV,CAAkB,UAAAC,IAAI,EAAG;AACvBA,MAAAA,IAAI,CAACL,gBAAL,CAAsB,OAAtB,EAA8ByG,eAA9B;AACD,KAFD;AAGD;AACF;;AAED,SAASA,eAAT,CAAyB1E,CAAzB,EAA2B;AACzBA,EAAAA,CAAC,CAACU,cAAF;;AACA,MAAGV,CAAC,CAACC,MAAF,CAASW,SAAT,CAAmBC,QAAnB,CAA4B,WAA5B,CAAH,EAA4C;AAC1C,QAAIwD,OAAO,GAAGrE,CAAC,CAACC,MAAF,CAASU,OAAT,CAAiB,IAAjB,EAAuBG,OAAvB,CAA+B3B,EAA7C;AACA,QAAIoF,WAAW,GAAG,IAAlB;;AACA,QAAGvE,CAAC,CAACC,MAAF,CAASU,OAAT,CAAiB,GAAjB,EAAsBG,OAAtB,CAA8B6D,MAA9B,KAAyC,MAA5C,EAAmD;AAChDJ,MAAAA,WAAW,GAAG,KAAd;AACF,KAFD,MAEK;AACFA,MAAAA,WAAW,GAAG,IAAd;AACF;;AACDD,IAAAA,aAAa,CAACD,OAAD,EAASE,WAAT,CAAb;AACD;AACF;;AAED,SAASzB,YAAT,CAAsB9F,SAAtB,EAAgC;AAC9B6B,EAAAA,OAAO,CAACC,GAAR,CAAY9B,SAAZ;AAEA,MAAI4H,UAAU,GAAE,EAAhB;AACA5H,EAAAA,SAAS,CAACqB,OAAV,CAAkB,UAAAC,IAAI,EAAG;AACvBA,IAAAA,IAAI,CAACR,QAAL,CAAcO,OAAd,CAAsB,UAAA+E,WAAW,EAAE;AACjC,UAAGwB,UAAU,CAACxB,WAAW,CAAC9D,KAAb,CAAb,EAAiC;AAC7BsF,QAAAA,UAAU,CAACxB,WAAW,CAAC9D,KAAb,CAAV,IAAiC2B,QAAQ,CAACmC,WAAW,CAACjC,QAAb,CAAzC;AACH,OAFD,MAEM,IAAG,CAACyD,UAAU,CAACxB,WAAW,CAAC9D,KAAb,CAAd,EAAkC;AACtCsF,QAAAA,UAAU,CAACxB,WAAW,CAAC9D,KAAb,CAAV,GAA+B2B,QAAQ,CAACmC,WAAW,CAACjC,QAAb,CAAvC;AACD;AACF,KAND;AAOD,GARD;AAUA,MAAI0D,MAAM,GAAGC,MAAM,CAACC,IAAP,CAAYH,UAAZ,CAAb;AACA,MAAII,SAAS,GAAG,EAAhB;AAEAH,EAAAA,MAAM,CAACxG,OAAP,CAAe,UAAAC,IAAI,EAAG;AACpB,QAAI2G,GAAG,GAAE,EAAT;AACAA,IAAAA,GAAG,CAAC3C,IAAJ,CAAShE,IAAT;AACA2G,IAAAA,GAAG,CAAC3C,IAAJ,CAASsC,UAAU,CAACtG,IAAD,CAAnB;AACA0G,IAAAA,SAAS,CAAC1C,IAAV,CAAe2C,GAAf;AACD,GALD;AAOAC,EAAAA,aAAa,CAACF,SAAD,CAAb;AACD;;AAED,SAASE,aAAT,CAAuBF,SAAvB,EAAiC;AAC/B;AACA,MAAIG,KAAK,GAAGC,EAAE,CAACC,QAAH,CAAY;AACtBC,IAAAA,MAAM,EAAE,QADc;AACJ;AAClBzH,IAAAA,IAAI,EAAE;AACF0H,MAAAA,IAAI,EAAE,KADJ;AAEFC,MAAAA,OAAO,EAAER,SAFP;AAGFS,MAAAA,MAAM,EAAC;AACL,uBAAc,SADT;AAEL,uBAAc,SAFT;AAGL,qBAAa,SAHR;AAIL,cAAM;AAJD;AAHL;AAFgB,GAAZ,CAAZ;AAaD,C,CAED;;;AAEA,SAASlI,YAAT,GAAuB;AACrB,MAAMmB,QAAQ,GAAGvB,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAjB;AACA,MAAMsI,WAAW,GAAG;AAClB,UAAM;AACJC,MAAAA,QAAQ,EAAE;AACRjD,QAAAA,OAAO,EAAE;AADD;AADN,KADY;AAMlB,UAAM;AACJiD,MAAAA,QAAQ,EAAE;AACRjD,QAAAA,OAAO,EAAE;AADD;AADN,KANY;AAWlB,aAAS;AACPiD,MAAAA,QAAQ,EAAE;AACRjD,QAAAA,OAAO,EAAE;AADD,OADH;AAIPgB,MAAAA,KAAK,EAAE;AACLhB,QAAAA,OAAO,EAAC;AADH;AAJA,KAXS;AAmBlB,YAAQ;AACNiD,MAAAA,QAAQ,EAAE;AACRjD,QAAAA,OAAO,EAAE;AADD;AADJ,KAnBU;AAwBlB,YAAO;AACLiD,MAAAA,QAAQ,EAAE;AACRjD,QAAAA,OAAO,EAAE;AADD;AADL;AAxBW,GAApB;AA+BAhE,EAAAA,QAAQ,CAACN,gBAAT,CAA0B,kBAA1B,EAA8CC,OAA9C,CAAsD,UAAAC,IAAI,EAAE;AAC1DA,IAAAA,IAAI,CAACL,gBAAL,CAAsB,QAAtB,EAAgC,YAAW;AACzC,UAAK2H,MAAM,GAAGC,QAAQ,CAACnH,QAAD,EAAUgH,WAAV,CAAtB;AACApH,MAAAA,IAAI,CAACwH,kBAAL,CAAwBC,WAAxB,GAAsC,EAAtC;;AAEA,UAAGH,MAAH,EAAU;AACRd,QAAAA,MAAM,CAACC,IAAP,CAAYa,MAAZ,EAAoBvH,OAApB,CAA4B,UAAA0G,IAAI,EAAG;AACjC;AACA5H,UAAAA,QAAQ,CAACC,aAAT,2BAAyC2H,IAAzC,UAAmDgB,WAAnD,GAAiEH,MAAM,CAACb,IAAD,CAAvE;AACD,SAHD;AAID;AACF,KAVD;AAWD,GAZD;AAaD","file":"all.js","sourcesContent":["// 請代入自己的網址路徑\nconst api_path = \"joycheng\";\nconst token = \"PSNly2pd99XQct8dnO9toWyVyO13\";\n\nlet productData =[];\nlet cartData= [];\nlet cartProductId = '';\nlet cartId = '';\nlet orderData= [];\nlet orderList=[];\nlet cartNum = 1 ;\n\nfunction init(){\n  if(document.querySelector('[data-page=\"front\"]')){\n    getProductList();\n    getCartList();\n    validateForm();\n  }else{\n    getOrderList();\n    \n  }\n}\n\ninit();\n\n//font \n\n//取得產品列表\nfunction getProductList() {\n  axios.get(\n              `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`\n      )\n    .then(function (response) {\n      productData = response.data.products;\n      renderProductList(productData);\n      const selectList = document.querySelector('.js-select');\n      selectList.addEventListener('change', renderSelectList);\n\n      const addCartBtn = document.querySelectorAll('.js-addToCart');\n      addCartBtn.forEach(item => item.addEventListener('click', addToCartData));\n\n      const cartList = document.querySelector('.js-cartList');\n      cartList.addEventListener('click', deleteCartId);\n\n      const formList = document.querySelector('.js-form');\n      formList.addEventListener('submit',getOrderData);\n\n    })\n    .catch(function(error){\n      console.log('error', error)\n    })\n}\n\n//renderProductList\nfunction renderProductList(inputData){\n  const productList = document.querySelector('.js-product-list');\n  let str ='';\n  inputData.forEach(item=>{\n    const content = `\n    <li class=\"productCard d-flex flex-column justify-content-between\" data-id=\"${item.id}\" data-category=\"${item.category}\">\n    <div>\n      <h4 class=\"productType\">新品</h4>\n      <img src=\"${item.images}\" alt=\"product img\">\n      <a href=\"#\" class=\"addCardBtn js-addToCart\" data-num=\"1\">加入購物車</a>\n      <h3>${item.title}</h3>\n    </div>\n      <div>\n        <del class=\"originPrice\">NT$${addCommaReg(item['origin_price'])}</del>\n        <p class=\"nowPrice\">NT$${addCommaReg(item.price)}</p>\n      </div>\n    </li>\n    `;\n    str += content;\n  });\n  productList.innerHTML = str;\n} \n\n// 加上千分位\nfunction addCommaReg(num){\n  var number = num.toString().split('.');\n  number[0] = number[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  \n  return number.join('.')\n}\n\n//select change add render\nfunction renderSelectList(e){\n  console.log(e.target.value);\n  let filterData = [];\n\n  //productData\n  if(e.target.value === '全部'){\n    filterData = productData;\n  }else{\n    filterData = productData.filter((item => item.category === e.target.value))\n  }\n  renderProductList(filterData);\n\n}\n\n//加入購物車 1\nfunction addCartItem(productId, num) {\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`, {\n    data: {\n      \"productId\": productId,\n      \"quantity\": num\n    }\n  }).\n    then(function (response) {\n      getCartList();\n  })\n}\n\n//取得購物車清單\nfunction getCartList() {\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`).\n    then(function (response) {\n      cartData = response.data.carts ;\n      renderCartList(cartData);\n    })\n}\n\n//點擊監聽事件\nfunction addToCartData(e){\n  e.preventDefault();\n  if(e.target.closest('a').classList.contains('addCardBtn')){\n    let productId = e.target.closest('li').dataset.id;\n    let clickNum = e.target.closest('a').dataset.num;\n\n    cartData.forEach(item =>{\n      if(item.product.id === productId ){\n        cartNum += parseInt(clickNum);\n      }\n    });\n\n    addCartItem(productId, cartNum);\n  }\n  \n\n}\n\n// render cartList\nfunction renderCartList(inputData){\n  const cartList = document.querySelector('.js-cartList');\n  let num = 0;\n  let str = `<tr>\n    <th width=\"40%\">品項</th>\n    <th width=\"15%\">單價</th>\n    <th width=\"15%\">數量</th>\n    <th width=\"15%\">金額</th>\n    <th width=\"15%\"></th>\n  </tr>\n  `;\n\n  if(inputData.length ===0 ){\n    let content = `\n    <tr>\n      <td colspan=\"2\" class=\"mx-auto\" >\n        購物車目前是空的呦～\n      </td>\n    </tr>\n    `;\n    str += content;\n    \n  }else{\n    inputData.forEach(item =>{\n      let content = `\n      <tr data-cart-id=\"${item.id}\">\n      <td>\n          <div class=\"cardItem-title\">\n              <img src=\"${item.product.images}\" alt=\"img\">\n              <p>${item.product.title}</p>\n          </div>\n      </td>\n      <td>NT$${addCommaReg(item.product.price)}</td>\n      <td>${item.quantity}</td>\n      <td>NT$${addCommaReg(item.product.price*item.quantity)}</td>\n      <td class=\"discardBtn\">\n          <a href=\"#\" class=\"material-icons\" data-clear=\"single\">\n              clear\n          </a>\n      </td>\n    </tr>\n    `;\n      num += item.product.price;\n      str += content;\n    })\n    let endContent = `  <tr>\n    <td>\n        <a href=\"#\" class=\"discardAllBtn\" data-clear=\"all\">刪除所有品項</a>\n    </td>\n    <td></td>\n    <td></td>\n    <td>\n        <p>總金額</p>\n    </td>\n    <td>NT$${addCommaReg(num)}</td>\n  </tr>`\n    str += endContent ;\n  }\n  cartList.innerHTML =str;\n\n}\n\n// 刪除 cart id\nfunction deleteCartId(e){\n  if(document.querySelector('.js-cartList')){\n    console.log(e.target.dataset.clear);\n\n    // if(e.target.nodeList)\n    if(e.target.dataset.clear === 'single'){\n      e.preventDefault();\n      cartId = e.target.closest('tr').dataset.cartId;\n\n     deleteCartItem(cartId);\n    }else if(e.target.dataset.clear === 'all'){\n      e.preventDefault();\n      deleteAllCartList();\n    };\n\n  }\n}\n\n// 刪除購物車內特定產品\nfunction deleteCartItem(cartId) {\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${cartId}`).\n    then(function (response) {\n      cartData = response.data.carts ;\n      getCartList()\n    })\n}\n\n//刪除所有產品\nfunction deleteAllCartList() {\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`).\n    then(function (response) {\n      cartData = response.data.carts ;\n      getCartList()\n    })\n}\n\n//送出表單\nfunction getOrderData(e){\n  if(e.target.classList.contains('js-form')){\n    e.preventDefault();\n    const inputGroup = document.querySelectorAll('input');\n    const select = document.querySelector('#tradeWay');\n    if(cartData.length === 0){\n      alert('購物車沒有東西呦～趕快去購物吧！')\n      return;\n    }\n\n  const year = new Date().getFullYear() ;\n  const month = (new Date().getMonth() + 1 < 10 ? '0' : '') + (new Date().getMonth() + 1) ;  //十位數＋個位數\n  const date = (new Date().getDate() < 10 ? '0' : '') + new Date().getDate() ;\n  let dateValue = `${year}/${month}/${date}`;\n\n\n    for(let i = 0; i < inputGroup.length ; i++){\n      if(inputGroup[i].getAttribute('type')!=='submit'){\n        if(inputGroup[i].value.length === 0){\n          alert( `${inputGroup[i].placeholder}!`);\n          return;\n        }else{\n          if( i+2 != inputGroup.length){\n            orderData.push(inputGroup[i].value.trim());\n          }else{\n            orderData.push(inputGroup[i].value.trim());\n            orderData.push(select.value); \n            orderData.push(dateValue);\n\n            let userData = {\n              \"name\": orderData[0],\n              \"tel\": orderData[1],\n              \"email\": orderData[2],\n              \"address\": orderData[3],\n              \"payment\": orderData[4]\n            };\n            console.log(userData);\n            createOrder(userData) ;\n          }\n        }\n      }\n    }\n   \n  }\n}\n\nfunction createOrder(userData) {\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/orders`,\n    {\n      \"data\": {\n        \"user\": userData\n      }\n    }\n  ).\n  then(function (response) {\n      alert('訂單已送出囉～');\n      const inputGroup = document.querySelectorAll('input');\n      const select = document.querySelector('#tradeWay');\n\n      inputGroup.forEach(item=>{\n        if(item.getAttribute('type')!=='submit'){\n          item.value ='';\n        }\n      })\n      select.value = 'ATM';\n      getCartList();\n\n    })\n    .catch(function(error){\n      console.log('error',error.response.data.message);\n    })\n}\n\n//back\nfunction getOrderList() {\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`,\n    {\n      headers: {\n        'Authorization': token\n      }\n    })\n    .then(function (response) {\n      orderList = response.data.orders;\n      renderOrderList(orderList);\n      getChartData(orderList)\n\n      const deleteAll = document.querySelectorAll('[data-del]');\n      deleteAll.forEach(item => item.addEventListener('click', deleteOrders));\n\n      getOrderStatus();\n    })\n}\n\nfunction renderOrderList(inputData){\n  const orderTable = document.querySelector('.js-order-list');\n  let str = '';\n  str += ` <thead>\n  <tr>\n      <th>訂單編號</th>\n      <th>聯絡人</th>\n      <th>聯絡地址</th>\n      <th>電子郵件</th>\n      <th>訂單品項</th>\n      <th>訂單日期</th>\n      <th>訂單狀態</th>\n      <th>操作</th>\n  </tr>\n</thead>`;\n  if(inputData.length === 0){\n    let content = `\n    <tr>\n      <td colspan=\"9\">目前沒有訂單呦～</td>\n    </tr>\n    `\n    str += content;\n  }else{\n    orderList = sortOrderList(inputData);\n    orderList.forEach(item =>{\n      item.products.forEach(productItem =>{\n        let content = `\n        <tr  data-id=\"${item.id}\">\n          <td>${item.createdAt}</td>\n          <td>\n              <p>${item.user.name}</p>\n              <p>${item.user.tel}</p>\n          </td>\n          <td>${item.user.address}</td>\n          <td>${item.user.email}</td>\n          <td>\n            <p>${productItem.title}</p>\n          </td>\n          <td>${dateReg(item.createdAt)}</td>\n          <td class=\"orderStatus\">\n              <a href=\"#\" class=\"js-status\" data-status=\"${item.paid ? 'true':'false'}\">${item.paid ? '已處理':'未處理'}</a>\n          </td>\n          <td>\n              <input type=\"button\" class=\"delSingleOrder-Btn\" value=\"刪除\" data-del=\"single\">\n          </td>\n        </tr>\n        `\n        str += content;\n      })\n    })\n    \n  }\n\n  orderTable.innerHTML = str;\n}\n\n//訂單日期\nfunction dateReg(inputDate){\n  let date = new Date(inputDate*1000)\n  return date.toLocaleDateString();\n}\n\n\nfunction sortOrderList(inputData){\n  inputData.sort((a,b)=>{\n    return a.createdAt - b.createdAt\n  })\n  return inputData\n}\n\nfunction deleteOrders(e){\n  if(e.target.dataset.del){\n    e.preventDefault()\n    if(e.target.dataset.del==='all'){\n      deleteAllOrder();\n    }else if(e.target.dataset.del === 'single'){\n      let id = e.target.closest('tr').dataset.id;\n      deleteOrderItem(id);\n    }\n  }\n}\n\n// 刪除全部訂單\nfunction deleteAllOrder() {\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`,\n    {\n      headers: {\n        'Authorization': token\n      }\n    })\n    .then(function (response) {\n      getOrderList();\n    })\n}\n\n\n// 刪除特定訂單\nfunction deleteOrderItem(orderId) {\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders/${orderId}`,\n    {\n      headers: {\n        'Authorization': token\n      }\n    })\n    .then(function (response) {\n      getOrderList();\n    })\n}\n\n\n// 修改訂單狀態\n\nfunction editOrderList(orderId, orderStatus) {\n  axios.put(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`,\n    {\n      \"data\": {\n        \"id\": orderId,\n        \"paid\": orderStatus\n      }\n    },\n    {\n      headers: {\n        'Authorization': token\n      }\n    })\n    .then(function (response) {\n      console.log(response);\n      getOrderList();\n    })\n}\n\n\nfunction getOrderStatus(){\n  if(document.querySelector('.js-status')){\n    const statusBtn = document.querySelectorAll('.js-status');\n    statusBtn.forEach(item =>{\n      item.addEventListener('click',editOrderStatus);\n    })\n  }\n}\n\nfunction editOrderStatus(e){\n  e.preventDefault();\n  if(e.target.classList.contains('js-status')){\n    let orderId = e.target.closest('tr').dataset.id;\n    let orderStatus = null;\n    if(e.target.closest('a').dataset.status === 'true'){\n       orderStatus = false;\n    }else{\n       orderStatus = true;\n    }\n    editOrderList(orderId,orderStatus);\n  }\n}\n\nfunction getChartData(orderList){\n  console.log(orderList);\n\n  let productObj ={};\n  orderList.forEach(item =>{\n    item.products.forEach(productItem=>{\n      if(productObj[productItem.title]){\n          productObj[productItem.title] += parseInt(productItem.quantity);\n      }else if(!productObj[productItem.title]){\n        productObj[productItem.title]= parseInt(productItem.quantity);\n      }\n    })\n  })\n\n  let aryObj = Object.keys(productObj);\n  let chartData = []\n\n  aryObj.forEach(item =>{\n    let ary =[];\n    ary.push(item);\n    ary.push(productObj[item]);\n    chartData.push(ary);\n  })\n\n  generateChart(chartData);\n}\n\nfunction generateChart(chartData){\n  // C3.js\n  let chart = c3.generate({\n    bindto: '#chart', // HTML 元素綁定\n    data: {\n        type: \"pie\",\n        columns: chartData,\n        colors:{\n          \"Louvre 雙人床架\":\"#DACBFF\",\n          \"Antony 雙人床架\":\"#9D7FEA\",\n          \"Anty 雙人床架\": \"#5434A7\",\n          \"其他\": \"#301E5F\",\n        }\n    },\n  });\n}\n\n//validate.js\n\nfunction validateForm(){\n  const formList = document.querySelector('.js-form');\n  const constraints = {\n    '姓名': {\n      presence: {\n        message: \"是必填欄位\"\n      },\n    },\n    '電話': {\n      presence: {\n        message: \"是必填欄位\"\n      },\n    },\n    'Email': {\n      presence: {\n        message: \"是必填欄位\"\n      },\n      email: {\n        message:\"請輸入正確信箱格式\",\n      }\n    },\n    '寄送地址': {\n      presence: {\n        message: \"是必填欄位\"\n      },\n    },\n    '交易方式':{\n      presence: {\n        message: \"是必填欄位\"\n      },\n    },\n  };\n\n  formList.querySelectorAll('.orderInfo-input').forEach(item=>{\n    item.addEventListener('change', function (){\n      let  errors = validate(formList,constraints);\n      item.nextElementSibling.textContent = '';\n      \n      if(errors){\n        Object.keys(errors).forEach(keys =>{\n          // console.log(errors[keys]);\n          document.querySelector(`[data-message=\"${keys}\"]`).textContent = errors[keys];\n        })\n      }\n    });\n  });\n}"]}